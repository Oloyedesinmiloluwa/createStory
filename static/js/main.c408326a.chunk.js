(this.webpackJsonpstory=this.webpackJsonpstory||[]).push([[0],{24:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){e.exports=n(84)},46:function(e,t,n){},47:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a,r=n(13),l=n(0),c=n.n(l),o=n(15),i=n.n(o),s=(n(46),n(9)),u=n(11),m=n(1),d=(n(47),function(e){var t=e.children,n=e.onClick,a=e.className,r=e.name,l=e.id;return c.a.createElement("div",{className:"button".concat(a?" "+a:"")},c.a.createElement("button",{id:l,name:r,onClick:n},t))}),E=(n(24),n(3)),p="LOGIN_SUCCESS",f=n(37),h=n.n(f).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_URL,timeout:1e4}),b=function(e){var t=h.defaults.headers.common;return e&&(t.Authorization="Bearer ".concat(e)),t},g=h,v=function(e){return{type:p,user:e}},y=function(){return c.a.createElement(c.a.Fragment,null,"...")},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(t){e[t]||(n[t]="".concat(t," field is required"))})),n},j=(n(34),n(17)),C=(n(69),function(e){var t=e.style,n=e.children;return c.a.createElement("p",{className:"errorText",style:Object(j.a)({},{fontSize:".75rem",marginTop:"-20px",color:"red"},{},t)},n)}),S=function(e){var t=e.label,n=e.type,a=e.id,r=e.onChange,l=e.value,o=e.disabled,i=e.errorText;return c.a.createElement("div",{className:"input"},c.a.createElement("label",{htmlFor:a},t),c.a.createElement("input",{disabled:o,onChange:r,value:l,type:n||"text",id:a}),c.a.createElement(C,null,i))},w=(n(70),function(e){var t=e.children;return c.a.createElement("div",{className:"body"},t)}),k=(n(71),function(e){var t=e.notify,n=e.children,a=e.handleCancel;return c.a.createElement("div",{style:{top:t?"90px":"-200px"},className:"notify"},n,c.a.createElement("button",{onClick:a},"ok"))}),T=function(e){var t=e.history,n=Object(l.useState)(""),a=Object(m.a)(n,2),o=a[0],i=a[1],u=Object(l.useState)(""),p=Object(m.a)(u,2),f=p[0],h=p[1],O=Object(l.useState)(!1),j=Object(m.a)(O,2),C=j[0],T=j[1],x=Object(l.useState)(!1),N=Object(m.a)(x,2),_=N[0],R=(N[1],Object(l.useState)({})),I=Object(m.a)(R,2),L=I[0],A=I[1],D=Object(l.useState)({}),F=Object(m.a)(D,2),U=F[0],P=F[1],Y=Object(E.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{handleCancel:function(){return P({})},notify:!!Object.keys(U).length},U.message),c.a.createElement("div",{className:"login"},c.a.createElement(w,null,c.a.createElement(S,{type:"email",label:"Email",value:o,onChange:function(e){return i(e.target.value)},id:"email",errorText:L.email}),c.a.createElement(S,{type:"password",label:"Password",value:f,onChange:function(e){return h(e.target.value)},id:"password",errorText:L.password}),c.a.createElement(d,{onClick:function(e){e.preventDefault();var n=function(e){var t={};return e.email||(t.email="Email is required"),e.password||(t.password="Password is required"),t}({email:o,password:f});Object.keys(n).length?A(n):(T(!0),Y(function(e,t){return function(n){var a=JSON.stringify(e),l=t?"/api/admin-login":"/api/login";return g.post(l,a,{headers:{"Content-Type":"Application/json"}}).then((function(e){if(200===e.status){var t=e.data,a=t.token,l=Object(r.a)(t,["token"]);return n(v(l)),b(a),localStorage.setItem("wecreate-token",a),e}}))}}({email:o,password:f},_)).then((function(e){T(!1),"Admin"===e.data.userRoles[0]?t.push("/stories"):t.push("/story/new")})).catch((function(e){if(T(!1),!e.response)return P({message:"You seem to have a problem with your internet"});P({message:e.response.data&&e.response.data.message})})))}},"Submit ",C&&c.a.createElement(y,null)),c.a.createElement(s.b,{style:{float:"right"},to:"/signup"},"Signup"))))},x=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(T,e))},N=function(){return c.a.createElement("div",null,c.a.createElement("h2",{style:{textAlign:"center"}},"I lead no where yet."))},_=(n(35),n(73),function(e){var t=e.options,n=e.disabled,a=e.value,r=e.onChange,l=e.errorText;return c.a.createElement("div",{className:"dropDown"},c.a.createElement("select",{value:a,onChange:r,disabled:n},c.a.createElement("option",null),t.map((function(e,t){return c.a.createElement("option",{key:t},e)}))),c.a.createElement(C,null,l))}),R=function(e){var t=e.label,n=e.id,a=e.onChange,r=e.value,l=e.disabled,o=e.errorText;return c.a.createElement("div",{className:"input"},c.a.createElement("label",{htmlFor:n},t),c.a.createElement("input",{disabled:l,onChange:a,value:r,type:"number",id:n}),c.a.createElement(C,null,o))},I=(n(74),n(75),function(e){var t=e.label,n=e.placeholder,a=e.id,r=e.onChange,l=e.value,o=e.disabled,i=e.errorText;return c.a.createElement("div",{className:"textarea"},c.a.createElement("label",{htmlFor:a},t),c.a.createElement("textarea",{disabled:o,placeholder:n,onChange:r,value:l,id:a}),c.a.createElement(C,null,i))}),L=function(e){var t=e.handleSubmit,n=e.setSummary,a=e.setType,r=e.setComplexity,l=e.setDescription,o=e.setCost,i=e.setTime,s=e.loading,u=e.disabled,m=e.story,E=e.error,p=e.handleReview,f=e.isAdmin,h=m.summary,b=m.description,g=m.estimatedHrs,v=m.cost,O=m.complexity,j=m.type,C=E||{};return c.a.createElement(w,null,c.a.createElement(S,{label:"Summary",value:h,onChange:function(e){return n(e.target.value)},id:"summary",disabled:u,errorText:C.summary}),c.a.createElement(I,{label:"Description",value:b,onChange:function(e){return l(e.target.value)},id:"description",disabled:u,errorText:C.description}),c.a.createElement(R,{label:"Cost($)",value:v,onChange:function(e){return o(e.target.value)},id:"cost",disabled:u,errorText:C.cost}),c.a.createElement(R,{label:"Time(hrs)",value:g,onChange:function(e){return i(e.target.value)},id:"time",disabled:u,errorText:C.estimatedHrs}),c.a.createElement("label",null,"Type"),c.a.createElement(_,{disabled:u,options:["enhancement","bugfix","development","qa"],errorText:C.type,value:j,onChange:function(e){return a(e.target.value)}}),c.a.createElement("label",null,"Complexity"),c.a.createElement(_,{disabled:u,options:["low","mid","high"],errorText:C.complexity,value:O,onChange:function(e){return r(e.target.value)}}),f?c.a.createElement("div",{className:"",style:{display:"flex",justifyContent:"center"}},c.a.createElement(d,{onClick:p,id:"accepted"},"Accept"),c.a.createElement(d,{onClick:p,id:"rejected"},"Reject")):c.a.createElement(d,{onClick:t},"Submit ",s&&c.a.createElement(y,null)))},A="CREATE_STORY_SUCCESS",D="GET_STORIES_SUCCESS",F="UPDATE_CURRENT_STORY_SUCCESS",U=function(){return function(e){return g("/api/getStories",{headers:{Accept:"application/json"}}).then((function(t){var n;return"OK"===t.statusText&&e((n=t.data,{type:D,stories:n})),t.data}))}},P=function(e){return function(t){var n=JSON.stringify(e);return g.post("/api/createStories",n,{headers:{"content-type":"application/json"}}).then((function(e){return"Created"===e.statusText&&t(function(e){return{type:A,story:e}}(e.data)),e.data}))}},Y=(n(76),n(77),function(e){var t=e.children,n=e.onClick;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:n,className:"button-link"},t))}),H=function(e){var t=e.show,n=e.handleClick;return c.a.createElement("div",{style:{left:t?"0px":"-200px",backgroundColor:t?"#000000db":"rgba(0,0,0,.575)"},className:"side-nav"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(Y,{onClick:function(e){return n(e,"/story/new")}},"Create Story")),c.a.createElement("li",null,c.a.createElement(Y,{onClick:function(e){return n(e,"/stories")}},"List Stories")),c.a.createElement("li",null,c.a.createElement(Y,{onClick:function(e){return n(e,"/login")}},"Logout"))))},q=(n(78),n(79),function(){return c.a.createElement("div",{className:"menu-icon"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}),J=(n(80),function(e){var t=e.links,n=void 0===t?[]:t,a=e.location,r=e.handleClick;return c.a.createElement("div",{className:"nav-links"},c.a.createElement("ul",null,n.map((function(e,t){return c.a.createElement("li",{key:t,className:"".concat(a.pathname===e.to?"active":" ")},c.a.createElement(Y,{onClick:function(t){return r(t,e.to)}},e.name))}))))}),B=function(e){var t=e.onClickToggle,n=e.location,a=e.handleClick;return c.a.createElement("div",{className:"header"},c.a.createElement("header",null,c.a.createElement("div",{className:"brand"},c.a.createElement("button",{onClick:t},c.a.createElement(q,null)),c.a.createElement("h2",null,"WeCreate")),c.a.createElement(J,{location:n,links:[{name:"Create",to:"/story/new"},{name:"View",to:"/stories"},{name:"Logout",to:"/login"}],handleClick:a})))},K=function(e){var t=e.history,n=e.location,a=Object(l.useState)(!1),r=Object(m.a)(a,2),o=r[0],i=r[1],s=function(e){i((function(e){return!e}))},u=function(e,n){if(s(),"/login"===n)return localStorage.removeItem("wecreate-token"),window.location.href="/login";t.push(n)};return c.a.createElement("div",null,c.a.createElement(B,{location:n,onClickToggle:s,setToggle:i,handleClick:u}),c.a.createElement(H,{handleClick:u,show:o}))},W=function(e){var t=Object(l.useState)(""),n=Object(m.a)(t,2),a=n[0],r=n[1],o=Object(l.useState)(""),i=Object(m.a)(o,2),s=i[0],u=i[1],d=Object(l.useState)(""),p=Object(m.a)(d,2),f=p[0],h=p[1],b=Object(l.useState)(""),g=Object(m.a)(b,2),v=g[0],y=g[1],O=Object(l.useState)(""),j=Object(m.a)(O,2),C=j[0],S=j[1],w=Object(l.useState)(""),T=Object(m.a)(w,2),x=T[0],N=T[1],_=Object(l.useState)(!1),R=Object(m.a)(_,2),I=R[0],A=R[1],D=Object(l.useState)({}),F=Object(m.a)(D,2),U=F[0],Y=F[1],H=Object(l.useState)({}),q=Object(m.a)(H,2),J=q[0],B=q[1],W={summary:a,description:s,cost:f,estimatedHrs:v,complexity:C,type:x},V=Object(E.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{handleCancel:function(){return B({})},notify:!!Object.keys(J).length},J.message),c.a.createElement(K,e),c.a.createElement("div",{className:"new-story"},c.a.createElement("h1",null,"Create Story"),c.a.createElement(L,{story:W,setSummary:r,setDescription:u,setCost:h,setTime:y,setType:N,setComplexity:S,history:e.history,loading:I,handleSubmit:function(){A(!0);var t=function(e){var t={};return["summary","description","cost","estimatedHrs","complexity","type"].forEach((function(n){e[n]||(t[n]="".concat(n," field is required"))})),t}(W);if(Object.keys(t).length)return A(!1),Y(t);V(P(W)).then((function(){return e.history.push("/stories")})).catch((function(e){if(A(!1),!e.response)return B({message:"You seem to have a problem with your internet"});B({message:e.response.data&&e.response.data.message})}))},error:U})))},V=function(e){var t,n=e.story,a=e.handleRowClick,r="inherit";switch(n.status){case!1:r="red";break;case!0:r="green"}return c.a.createElement("tr",{style:{color:r},onClick:function(e){return a(e,n.id)}},c.a.createElement("td",null,n.summary),c.a.createElement("td",null,n.description),c.a.createElement("td",null,n.cost),c.a.createElement("td",null,n.type),c.a.createElement("td",null,n.complexity),c.a.createElement("td",null,n.estimatedHrs),c.a.createElement("td",null,null===(t=n.status)?"pending":t?"accepted":"rejected"))},z=function(e){var t=e.stories,n=e.handleRowClick;return c.a.createElement(c.a.Fragment,null,t.length?c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Summary"),c.a.createElement("th",null,"Description"),c.a.createElement("th",null,"Cost"),c.a.createElement("th",null,"Type"),c.a.createElement("th",null,"Complexity"),c.a.createElement("th",null,"Time(hr)"),c.a.createElement("th",null,"Status"))),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement(V,{handleRowClick:n,key:e.id,story:e})})))):c.a.createElement("h3",{className:"text-center"},"You have cleared all stories, there is none left needing your review"))},G=(n(81),function(e){var t=Object(l.useState)({}),n=Object(m.a)(t,2),a=n[0],r=n[1],o=Object(E.b)(),i=Object(E.c)((function(e){return e.stories})),s=Object(E.c)((function(e){return e.user})),u=!(!s.userRoles||"Admin"!==s.userRoles[0]);Object(l.useEffect)((function(){i.length||o(U()).catch((function(e){if(!e.response)return r({message:"You seem to have a problem with your internet"});r({message:e.response.data&&e.response.data.message})}))}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{handleCancel:function(){return r({})},notify:!!Object.keys(a).length},a.message),c.a.createElement(K,e),c.a.createElement("div",{className:"story-list-page"},c.a.createElement("h1",null,"Stories"),c.a.createElement("div",null,c.a.createElement(z,{stories:i,handleRowClick:function(t,n){u&&e.history.push("/stories/".concat(n,"/review"))}}))))}),X=function(e){var t=Object(l.useState)({}),n=Object(m.a)(t,2),a=n[0],r=n[1],o=Object(E.c)((function(t){return t.stories.find((function(t){return t.id===parseInt(e.match.params.storyId,10)}))}));o=o||{};var i=Object(E.c)((function(e){return e.user})),s=!(!i.userRoles||"Admin"!==i.userRoles[0])||e.history.push("/stories"),u=Object(E.b)();Object(l.useEffect)((function(){o.id||u(U())}),[o,u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{handleCancel:function(){return r({})},notify:!!Object.keys(a).length},a.message),c.a.createElement(K,e),c.a.createElement("div",{style:{marginTop:"90px"}},c.a.createElement("h1",{style:{textAlign:"center"}},"Review Story"),c.a.createElement(L,{disabled:!0,story:o,history:e.history,isAdmin:s,handleReview:function(t){u(function(e,t){return function(n){var a="/api/stories/".concat(e.id,"/");return"accepted"===t?a+="approve":"rejected"===t&&(a+="reject"),g.put(a).then((function(e){return 200===e.status&&n({type:F,story:e.data}),e.data}))}}(o,t.target.id)).then((function(t){e.history.push("/stories")})).catch((function(e){if(!e.response)return r({message:"You seem to have a problem with your internet"});r({message:e.response.data&&e.response.data.message})}))}})))},M=function(e){var t=e.component,n=e.isLoggedIn,a=Object(r.a)(e,["component","isLoggedIn"]);return c.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?c.a.createElement(t,e):c.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},$=function(e){var t=e.history,n=Object(l.useState)(""),a=Object(m.a)(n,2),r=a[0],o=a[1],i=Object(l.useState)(""),u=Object(m.a)(i,2),p=u[0],f=u[1],h=Object(l.useState)(""),b=Object(m.a)(h,2),v=b[0],j=b[1],C=Object(l.useState)(""),T=Object(m.a)(C,2),x=T[0],N=T[1],_=Object(l.useState)(!1),R=Object(m.a)(_,2),I=R[0],L=R[1],A=Object(l.useState)({}),D=Object(m.a)(A,2),F=D[0],U=D[1],P=Object(l.useState)({}),Y=Object(m.a)(P,2),H=Y[0],q=Y[1],J=Object(E.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{handleCancel:function(){return q({})},notify:!!Object.keys(H).length},H.message),c.a.createElement("div",{className:"login"},c.a.createElement(w,null,c.a.createElement(S,{label:"Firstname",value:v,onChange:function(e){return j(e.target.value)},id:"firstName",errorText:F.firstName}),c.a.createElement(S,{label:"Lastname",value:x,onChange:function(e){return N(e.target.value)},id:"lastName",errorText:F.lastName}),c.a.createElement(S,{type:"email",label:"Email",value:r,onChange:function(e){return o(e.target.value)},id:"email",errorText:F.email}),c.a.createElement(S,{type:"password",label:"Password",value:p,onChange:function(e){return f(e.target.value)},id:"password",errorText:F.password}),c.a.createElement(d,{onClick:function(e){e.preventDefault();var n=O({email:r,password:p,firstName:v,lastName:x},["email","password","firstName","lastName"]);Object.keys(n).length?U(n):(L(!0),J(function(e){return function(t){var n=JSON.stringify(e);return g.post("/api/signup",n,{headers:{"Content-Type":"Application/json"}})}}({email:r,password:p,firstName:v,lastName:x})).then((function(){L(!1),t.push("/login")})).catch((function(e){if(L(!1),!e.response)return q({message:"You seem to have a problem with your internet"});q({message:e.response.data&&e.response.data.message})})))}},"Submit ",I&&c.a.createElement(y,null)),c.a.createElement(s.b,{to:"/login"},"Login"))))},Q=function(e){var t=Object(E.c)((function(e){return e.user}));return c.a.createElement(s.a,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/",component:x,exact:!0}),c.a.createElement(u.b,{path:"/login",component:x}),c.a.createElement(u.b,{path:"/signup",component:$}),c.a.createElement(M,Object.assign({},e,{path:"/story/new",component:W,isLoggedIn:t&&t.isLoggedIn})),c.a.createElement(M,Object.assign({},e,{path:"/stories",component:G,isLoggedIn:t&&t.isLoggedIn,exact:!0})),c.a.createElement(M,Object.assign({},e,{path:"/stories/:storyId/review",component:X,isLoggedIn:t&&t.isLoggedIn})),c.a.createElement(u.b,{component:N})))},Z=n(10),ee=n(18),te=Object(Z.c)({currentStory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"":default:return e}},stories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(ee.a)(t.stories);case F:return[t.story].concat(Object(ee.a)(e.filter((function(e){return e.id!==t.story.id}))));case A:return[t.story].concat(Object(ee.a)(e));default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(j.a)({},t.user,{isLoggedIn:!0});default:return e}}}),ne=n(39),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.d,re=n(40),le=n.n(re),ce=(a={currentStory:{},stories:[],user:{}},Object(Z.e)(te,a,ae(Object(Z.a)(ne.a)))),oe=localStorage.getItem("wecreate-token");if(oe){b(oe);var ie=le()(oe),se=(ie.iat,ie.exp,Object(r.a)(ie,["iat","exp"]));ce.dispatch(v(se))}i.a.render(c.a.createElement((function(){return c.a.createElement(E.a,{store:ce},c.a.createElement(Q,null))}),null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.c408326a.chunk.js.map